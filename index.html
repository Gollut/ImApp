<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="width=device-width, initial-scale=1, text/html; charset=UTF-8" name="viewport"/>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<script src="http://code.jquery.com/jquery-latest.min.js"
        type="text/javascript"></script>
    <link rel="stylesheet" href="styles.css">
	<title>Codex ImApp</title>
</head>

<body>
	<main>
		<div class="modal_whitespace">
			<div class="modal card">
				Select image to upload
				<input type="file" name="upload_file" id="upload_file"></br>
				Or use link</br>
				<input type="text" name="upload_link" id="upload_link">
				<button class="btn btn-inverse" id="upload" name="upload">Upload file</button>
			</div>
		</div>
	</main>
	<script>
		 $(document).ready(function() {
		 	$("input[name=upload_file]").val('').clone(true);
		 	$("input[name=upload_link]").val('').clone(true);
			$( "#upload" ).click(function() {
				var formData = new FormData();
				formData.append('upload_file', $("input[name=upload_file]").prop('files')[0]);
				formData.append('upload_link', $("input[name=upload_link]").val());
		        $.ajax({
		          type:"POST",
		          url:"/functions/upload",
		          processData: false, 
		          contentType: false,
		          data: formData,
		          success: function(data){
		          	alert(data);
		          }
		       });
			});
		});
	</script>
</body>
</html>